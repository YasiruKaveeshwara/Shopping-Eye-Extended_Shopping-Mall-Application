{"ast":null,"code":"var _jsxFileName = \"D:\\\\SLIIT\\\\Year_3_Sem_1\\\\Z Projects\\\\SPM Project\\\\Shopping-Eye-Extended\\\\frontend\\\\src\\\\pages\\\\Products.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom'; // Import Link component\nimport SidebarIcon from '../components/sidebar/SidebarIcon';\nimport Header from '../components/header/Header';\nimport ProductsForm from '../components/forms/ProductsForm';\nimport ItemView from '../components/ProductCardView/ItemView'; // Import ItemView component\nimport '../components/sidebar/styles.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Products() {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [editingProduct, setEditingProduct] = useState(null);\n  const [shopName, setShopName] = useState('');\n  useEffect(() => {\n    // Get shop name from local storage\n    const storedShopName = localStorage.getItem('shopName');\n    setShopName(storedShopName || '');\n    fetchProducts(storedShopName);\n  }, []);\n  const fetchProducts = async shopName => {\n    try {\n      const response = await fetch('http://localhost:3050/api/items');\n      const data = await response.json();\n\n      // Filter products based on shopName\n      const filteredProducts = data.filter(product => product.shopName === shopName);\n      setProducts(filteredProducts);\n    } catch (error) {\n      console.error('Error fetching products:', error);\n    }\n  };\n  const handleDelete = async id => {\n    try {\n      const response = await fetch(`http://localhost:3050/api/items/${id}`, {\n        method: 'DELETE'\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setProducts(products.filter(product => product._id !== id));\n        alert(data.message);\n      } else {\n        alert(data.message);\n      }\n    } catch (error) {\n      console.error('Error deleting item:', error);\n    }\n  };\n  const handleEdit = product => {\n    setEditingProduct(product);\n  };\n  const handleCancelEdit = () => {\n    setEditingProduct(null);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SidebarIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/addproducts\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"add-product-button\",\n          children: \"Add Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Products\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), editingProduct ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Edit Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ProductsForm, {\n          product: editingProduct,\n          onSuccess: () => {\n            setEditingProduct(null);\n            fetchProducts(shopName); // Refetch products to reflect the updated data\n          },\n          onCancel: handleCancelEdit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-grid\",\n        children: products.length > 0 ? products.map(product => /*#__PURE__*/_jsxDEV(ItemView, {\n          product: product,\n          onEdit: handleEdit,\n          onDelete: handleDelete\n        }, product._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No products available.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Products, \"wEMaPFLhWENTKRfUZdMsyy/l/fI=\");\n_c = Products;\nvar _c;\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"names":["React","useEffect","useState","Link","SidebarIcon","Header","ProductsForm","ItemView","jsxDEV","_jsxDEV","Fragment","_Fragment","Products","_s","products","setProducts","editingProduct","setEditingProduct","shopName","setShopName","storedShopName","localStorage","getItem","fetchProducts","response","fetch","data","json","filteredProducts","filter","product","error","console","handleDelete","id","method","ok","_id","alert","message","handleEdit","handleCancelEdit","children","fileName","_jsxFileName","lineNumber","columnNumber","className","to","onSuccess","onCancel","length","map","onEdit","onDelete","_c","$RefreshReg$"],"sources":["D:/SLIIT/Year_3_Sem_1/Z Projects/SPM Project/Shopping-Eye-Extended/frontend/src/pages/Products.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom'; // Import Link component\nimport SidebarIcon from '../components/sidebar/SidebarIcon';\nimport Header from '../components/header/Header';\nimport ProductsForm from '../components/forms/ProductsForm';\nimport ItemView from '../components/ProductCardView/ItemView'; // Import ItemView component\nimport '../components/sidebar/styles.css';\n\nexport default function Products() {\n  const [products, setProducts] = useState([]);\n  const [editingProduct, setEditingProduct] = useState(null);\n  const [shopName, setShopName] = useState('');\n\n  useEffect(() => {\n    // Get shop name from local storage\n    const storedShopName = localStorage.getItem('shopName');\n    setShopName(storedShopName || '');\n\n    fetchProducts(storedShopName);\n  }, []);\n\n  const fetchProducts = async (shopName) => {\n    try {\n      const response = await fetch('http://localhost:3050/api/items');\n      const data = await response.json();\n      \n      // Filter products based on shopName\n      const filteredProducts = data.filter(product => product.shopName === shopName);\n      setProducts(filteredProducts);\n    } catch (error) {\n      console.error('Error fetching products:', error);\n    }\n  };\n\n  const handleDelete = async (id) => {\n    try {\n      const response = await fetch(`http://localhost:3050/api/items/${id}`, {\n        method: 'DELETE',\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setProducts(products.filter((product) => product._id !== id));\n        alert(data.message);\n      } else {\n        alert(data.message);\n      }\n    } catch (error) {\n      console.error('Error deleting item:', error);\n    }\n  };\n\n  const handleEdit = (product) => {\n    setEditingProduct(product);\n  };\n\n  const handleCancelEdit = () => {\n    setEditingProduct(null);\n  };\n\n  return (\n    <>\n      <SidebarIcon />\n      <div className=\"main\">\n        <Header />\n        <Link to=\"/addproducts\">\n          <button className=\"add-product-button\">Add Product</button>\n        </Link>\n        <h2>Products</h2>\n        {editingProduct ? (\n          <div>\n            <h3>Edit Product</h3>\n            <ProductsForm\n              product={editingProduct}\n              onSuccess={() => {\n                setEditingProduct(null);\n                fetchProducts(shopName); // Refetch products to reflect the updated data\n              }}\n              onCancel={handleCancelEdit}\n            />\n          </div>\n        ) : (\n          <div className=\"product-grid\">\n            {products.length > 0 ? (\n              products.map((product) => (\n                <ItemView\n                  key={product._id}\n                  product={product}\n                  onEdit={handleEdit}\n                  onDelete={handleDelete}\n                />\n              ))\n            ) : (\n              <p>No products available.</p>\n            )}\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}